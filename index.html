<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Level Flyout Menu Demo</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <!-- Widget Flyout CSS -->
    <link href="css/widget-flyout.css" rel="stylesheet">
    
    <style>
        body {
            background-color: var(--bs-body-bg, #f5f5f5);
            color: var(--bs-body-color, #212529);
            transition: background-color 0.3s ease, color 0.3s ease;
        }
        
        [data-bs-theme="dark"] body {
            background-color: #0d1117;
        }
        
        .sidebar {
            position: sticky;
            top: 1rem;
            height: calc(100vh - 2rem);
            overflow-y: auto;
        }
        
        .widget {
            margin-bottom: 2rem;
            background: var(--bs-body-bg, white);
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border: 1px solid var(--bs-border-color, #dee2e6);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        [data-bs-theme="dark"] .widget {
            background: #1c2128;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        
        .widget-header {
            border-radius: 0.5rem 0.5rem 0 0;
        }
        
        .main-content {
            background: var(--bs-body-bg, white);
            border-radius: 0.5rem;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            padding: 2rem;
            min-height: calc(100vh - 2rem);
            border: 1px solid var(--bs-border-color, #dee2e6);
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        
        [data-bs-theme="dark"] .main-content {
            background: #1c2128;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        
        .theme-toggle {
            position: fixed;
            top: 1rem;
            right: 1rem;
            z-index: 9999;
        }
        
        .theme-toggle .btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
        }
        
        .theme-toggle .btn:hover {
            transform: scale(1.1);
        }
        
        .theme-toggle .theme-icon {
            display: none;
        }
        
        [data-bs-theme="light"] .theme-toggle .theme-icon-light {
            display: inline-block;
        }
        
        [data-bs-theme="dark"] .theme-toggle .theme-icon-dark {
            display: inline-block;
        }
        
        pre {
            background-color: var(--bs-secondary-bg, #f8f9fa);
            border: 1px solid var(--bs-border-color, #dee2e6);
            border-radius: 0.375rem;
            padding: 1rem;
            overflow-x: auto;
        }
        
        [data-bs-theme="dark"] pre {
            background-color: #2d333b;
        }
        
        code {
            color: var(--bs-code-color, #d63384);
        }
        
        [data-bs-theme="dark"] code {
            color: #f47cb6;
        }
        
        kbd {
            background-color: var(--bs-body-color, #212529);
            color: var(--bs-body-bg, white);
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-size: 0.875em;
        }
        
        .table {
            color: var(--bs-body-color, #212529);
        }
        
        [data-bs-theme="dark"] .table {
            --bs-table-bg: #1c2128;
            --bs-table-border-color: #495057;
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Button -->
    <div class="theme-toggle">
        <button type="button" class="btn btn-primary" id="themeToggle" title="Toggle Dark Mode">
            <i class="bi bi-sun-fill theme-icon theme-icon-light"></i>
            <i class="bi bi-moon-stars-fill theme-icon theme-icon-dark"></i>
        </button>
    </div>
    
    <div class="container-fluid py-3">
        <div class="row g-3">
            <!-- Left Sidebar -->
            <div class="col-lg-2 col-md-3">
                <div class="sidebar">
                    <!-- JSON-driven menu (LTR) -->
                    <div class="widget" dir="ltr">
                        <div class="widget-header bg-danger text-white d-flex justify-content-between align-items-center px-3 py-2">
                            <span class="widget-title">Categories</span><i class="bi bi-grid-3x3-gap"></i>
                        </div>
                        <div class="widget-body p-3" id="menu-json-ltr"></div>
                    </div>
                    
                    <!-- Pre-rendered HTML menu (LTR) -->
                    <div class="widget" dir="ltr">
                        <div class="widget-header bg-danger text-white d-flex justify-content-between align-items-center px-3 py-2">
                            <span class="widget-title">Navigation</span><i class="bi bi-grid-3x3-gap"></i>
                        </div>
                        <div class="widget-body p-3" id="menu-html-ltr">
                            <ul class="widget-flyout-menu list-unstyled">
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-toggle dropdown-item">
                                        <i class="bi bi-house"></i>Home
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-speedometer2"></i>Dashboard</a></li>
                                        <li class="dropdown-submenu">
                                            <a href="#" class="dropdown-toggle dropdown-item">
                                                <i class="bi bi-gear"></i>Settings
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a href="#" class="dropdown-item"><i class="bi bi-person"></i>Profile</a></li>
                                                <li><a href="#" class="dropdown-item"><i class="bi bi-shield-lock"></i>Security</a></li>
                                                <li class="dropdown-submenu">
                                                    <a href="#" class="dropdown-toggle dropdown-item">
                                                        <i class="bi bi-bell"></i>Notifications
                                                    </a>
                                                    <ul class="dropdown-menu">
                                                        <li><a href="#" class="dropdown-item"><i class="bi bi-envelope"></i>Email</a></li>
                                                        <li><a href="#" class="dropdown-item"><i class="bi bi-phone"></i>SMS</a></li>
                                                        <li><a href="#" class="dropdown-item"><i class="bi bi-megaphone"></i>Push</a></li>
                                                    </ul>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-toggle dropdown-item">
                                        <i class="bi bi-box"></i>Products
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-laptop"></i>Electronics</a></li>
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-book"></i>Books</a></li>
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-controller"></i>Games</a></li>
                                    </ul>
                                </li>
                                <li><a href="#" class="dropdown-item"><i class="bi bi-info-circle"></i>About</a></li>
                                <li><a href="#" class="dropdown-item"><i class="bi bi-envelope"></i>Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="col-lg-8 col-md-6">
                <div class="main-content">
                    <h1 class="mb-4">Multi-Level Flyout Menu Demo</h1>
                    
                    <section class="mb-5">
                        <h2 class="h3 mb-3">Features</h2>
                        <ul>
                            <li><strong>Unlimited nesting depth</strong> - Create menus with as many levels as needed</li>
                            <li><strong>RTL/LTR support</strong> - Automatic direction detection based on <code>dir</code> attribute</li>
                            <li><strong>Touch/Hover detection</strong> - Hover behavior on desktop, click on mobile/tablets</li>
                            <li><strong>Keyboard navigation</strong> - Full arrow key, Enter, and Escape key support</li>
                            <li><strong>ARIA attributes</strong> - Accessible for screen readers</li>
                            <li><strong>JSON or HTML mode</strong> - Initialize from data or existing markup</li>
                            <li><strong>Multiple widgets</strong> - Works with multiple menus on the same page</li>
                            <li><strong>Bootstrap 5 compatible</strong> - Uses Bootstrap dropdown classes</li>
                            <li><strong>Dark mode support</strong> - Full dark mode with Bootstrap theme integration</li>
                        </ul>
                    </section>
                    
                    <section class="mb-5">
                        <h2 class="h3 mb-3">Usage Examples</h2>
                        
                        <h3 class="h5 mb-2">JSON Mode</h3>
                        <pre><code>const data = [
  {
    label: 'Electronics',
    icon: 'bi bi-laptop',
    url: '#',
    children: [
      { label: 'Laptops', icon: 'bi bi-laptop', url: '#' },
      { label: 'Phones', icon: 'bi bi-phone', url: '#' }
    ]
  }
];

renderFlyoutFromJson('#menu-container', data);</code></pre>
                        
                        <h3 class="h5 mb-2 mt-4">HTML Mode</h3>
                        <pre><code>&lt;div class="widget-body" id="menu-container"&gt;
  &lt;ul class="widget-flyout-menu list-unstyled"&gt;
    &lt;li class="dropdown-submenu"&gt;
      &lt;a href="#" class="dropdown-toggle dropdown-item"&gt;
        &lt;i class="bi bi-house"&gt;&lt;/i&gt;Home
      &lt;/a&gt;
      &lt;ul class="dropdown-menu"&gt;
        &lt;li&gt;&lt;a href="#" class="dropdown-item"&gt;Dashboard&lt;/a&gt;&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/li&gt;
  &lt;/ul&gt;
&lt;/div&gt;

&lt;script&gt;
  initWidgetFlyout('#menu-container');
&lt;/script&gt;</code></pre>
                    </section>
                    
                    <section class="mb-5">
                        <h2 class="h3 mb-3">Keyboard Navigation</h2>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>Key</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><kbd>↓</kbd></td>
                                    <td>Move to next item</td>
                                </tr>
                                <tr>
                                    <td><kbd>↑</kbd></td>
                                    <td>Move to previous item</td>
                                </tr>
                                <tr>
                                    <td><kbd>→</kbd></td>
                                    <td>Open submenu (LTR) / Close submenu (RTL)</td>
                                </tr>
                                <tr>
                                    <td><kbd>←</kbd></td>
                                    <td>Close submenu (LTR) / Open submenu (RTL)</td>
                                </tr>
                                <tr>
                                    <td><kbd>Enter</kbd> / <kbd>Space</kbd></td>
                                    <td>Activate item</td>
                                </tr>
                                <tr>
                                    <td><kbd>Esc</kbd></td>
                                    <td>Close current submenu</td>
                                </tr>
                            </tbody>
                        </table>
                    </section>
                    
                    <section class="mb-5">
                        <h2 class="h3 mb-3">Dark Mode</h2>
                        <p>The library includes full dark mode support that integrates seamlessly with Bootstrap 5 themes. Click the theme toggle button in the top-right corner to switch between light and dark modes.</p>
                        
                        <h3 class="h5 mb-2 mt-4">Theme API</h3>
                        <pre><code>// Initialize theme on page load
FlyoutTheme.init();

// Set specific theme
FlyoutTheme.setTheme('dark');  // or 'light' or 'auto'

// Toggle theme
FlyoutTheme.toggle();

// Get current theme
const currentTheme = FlyoutTheme.getTheme();

// Watch for system theme changes
FlyoutTheme.watchSystemTheme();</code></pre>

                        <p>The theme preference is automatically saved to localStorage and restored on page load. The library supports:</p>
                        <ul>
                            <li>Bootstrap 5 <code>data-bs-theme</code> attribute</li>
                            <li>Legacy <code>.dark-mode</code> class for older implementations</li>
                            <li>System preference detection with <code>prefers-color-scheme</code></li>
                            <li>Custom CSS variables for easy customization</li>
                        </ul>
                    </section>
                    
                    <section>
                        <h2 class="h3 mb-3">Try It</h2>
                        <p>Use the flyout menus in the left and right sidebars to test the functionality. Hover over items (on desktop) or click/tap (on mobile) to reveal submenus.</p>
                        <p class="text-muted">The left sidebar shows LTR menus, and the right sidebar shows RTL menus. Toggle dark mode using the button in the top-right corner.</p>
                    </section>
                </div>
            </div>
            
            <!-- Right Sidebar -->
            <div class="col-lg-2 col-md-3">
                <div class="sidebar">
                    <!-- JSON-driven menu (RTL) -->
                    <div class="widget" dir="rtl">
                        <div class="widget-header bg-danger text-white d-flex justify-content-between align-items-center px-3 py-2">
                            <span class="widget-title">دسته‌ها</span><i class="bi bi-grid-3x3-gap"></i>
                        </div>
                        <div class="widget-body p-3" id="menu-json-rtl"></div>
                    </div>
                    
                    <!-- Pre-rendered HTML menu (RTL) -->
                    <div class="widget" dir="rtl">
                        <div class="widget-header bg-danger text-white d-flex justify-content-between align-items-center px-3 py-2">
                            <span class="widget-title">فهرست</span><i class="bi bi-grid-3x3-gap"></i>
                        </div>
                        <div class="widget-body p-3" id="menu-html-rtl">
                            <ul class="widget-flyout-menu list-unstyled">
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-toggle dropdown-item">
                                        <i class="bi bi-house"></i>خانه
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-speedometer2"></i>داشبورد</a></li>
                                        <li class="dropdown-submenu">
                                            <a href="#" class="dropdown-toggle dropdown-item">
                                                <i class="bi bi-gear"></i>تنظیمات
                                            </a>
                                            <ul class="dropdown-menu">
                                                <li><a href="#" class="dropdown-item"><i class="bi bi-person"></i>پروفایل</a></li>
                                                <li><a href="#" class="dropdown-item"><i class="bi bi-shield-lock"></i>امنیت</a></li>
                                            </ul>
                                        </li>
                                    </ul>
                                </li>
                                <li class="dropdown-submenu">
                                    <a href="#" class="dropdown-toggle dropdown-item">
                                        <i class="bi bi-box"></i>محصولات
                                    </a>
                                    <ul class="dropdown-menu">
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-laptop"></i>الکترونیک</a></li>
                                        <li><a href="#" class="dropdown-item"><i class="bi bi-book"></i>کتاب</a></li>
                                    </ul>
                                </li>
                                <li><a href="#" class="dropdown-item"><i class="bi bi-info-circle"></i>درباره</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- jQuery 3.7+ -->
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Bootstrap 5 JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Widget Flyout JS -->
    <script src="js/widget-flyout.js"></script>
    
    <script>
        // Demo 1: JSON data for LTR menu
        const dataLTR = [
            {
                label: 'Electronics',
                icon: 'bi bi-laptop',
                url: '#',
                children: [
                    {
                        label: 'Computers',
                        icon: 'bi bi-pc-display',
                        url: '#',
                        children: [
                            { label: 'Laptops', icon: 'bi bi-laptop', url: '#' },
                            { label: 'Desktops', icon: 'bi bi-pc-display-horizontal', url: '#' },
                            {
                                label: 'Accessories',
                                icon: 'bi bi-mouse',
                                url: '#',
                                children: [
                                    { label: 'Keyboards', icon: 'bi bi-keyboard', url: '#' },
                                    { label: 'Mice', icon: 'bi bi-mouse', url: '#' },
                                    { label: 'Monitors', icon: 'bi bi-display', url: '#' }
                                ]
                            }
                        ]
                    },
                    { label: 'Phones', icon: 'bi bi-phone', url: '#' },
                    {
                        label: 'Audio',
                        icon: 'bi bi-speaker',
                        url: '#',
                        children: [
                            { label: 'Headphones', icon: 'bi bi-headphones', url: '#' },
                            { label: 'Speakers', icon: 'bi bi-speaker', url: '#' }
                        ]
                    }
                ]
            },
            {
                label: 'Clothing',
                icon: 'bi bi-bag',
                url: '#',
                children: [
                    { label: "Men's", icon: 'bi bi-person', url: '#' },
                    { label: "Women's", icon: 'bi bi-person-dress', url: '#' },
                    { label: "Kids'", icon: 'bi bi-person-arms-up', url: '#' }
                ]
            },
            {
                label: 'Home & Garden',
                icon: 'bi bi-house-door',
                url: '#',
                children: [
                    { label: 'Furniture', icon: 'bi bi-door-open', url: '#' },
                    { label: 'Kitchen', icon: 'bi bi-cup-straw', url: '#' }
                ]
            },
            {
                label: 'Books',
                icon: 'bi bi-book',
                url: '#',
                onClick: function(item, e) {
                    alert('Books clicked!');
                }
            }
        ];
        
        // Demo 2: JSON data for RTL menu
        const dataRTL = [
            {
                label: 'الکترونیک',
                icon: 'bi bi-laptop',
                url: '#',
                children: [
                    {
                        label: 'کامپیوتر',
                        icon: 'bi bi-pc-display',
                        url: '#',
                        children: [
                            { label: 'لپ‌تاپ', icon: 'bi bi-laptop', url: '#' },
                            { label: 'دسکتاپ', icon: 'bi bi-pc-display-horizontal', url: '#' },
                            {
                                label: 'لوازم جانبی',
                                icon: 'bi bi-mouse',
                                url: '#',
                                children: [
                                    { label: 'کیبورد', icon: 'bi bi-keyboard', url: '#' },
                                    { label: 'ماوس', icon: 'bi bi-mouse', url: '#' },
                                    { label: 'مانیتور', icon: 'bi bi-display', url: '#' }
                                ]
                            }
                        ]
                    },
                    { label: 'گوشی', icon: 'bi bi-phone', url: '#' }
                ]
            },
            {
                label: 'پوشاک',
                icon: 'bi bi-bag',
                url: '#',
                children: [
                    { label: 'مردانه', icon: 'bi bi-person', url: '#' },
                    { label: 'زنانه', icon: 'bi bi-person-dress', url: '#' }
                ]
            },
            { label: 'کتاب', icon: 'bi bi-book', url: '#' }
        ];
        
        // Initialize menus when DOM is ready
        $(document).ready(function() {
            // Initialize theme
            FlyoutTheme.init();
            FlyoutTheme.watchSystemTheme();
            
            // Theme toggle button handler
            $('#themeToggle').on('click', function() {
                FlyoutTheme.toggle();
            });
            
            // Demo 1: JSON-driven LTR
            renderFlyoutFromJson('#menu-json-ltr', dataLTR);
            
            // Demo 2: JSON-driven RTL
            renderFlyoutFromJson('#menu-json-rtl', dataRTL);
            
            // Demo 3: Pre-rendered HTML LTR
            initWidgetFlyout('#menu-html-ltr');
            
            // Demo 4: Pre-rendered HTML RTL
            initWidgetFlyout('#menu-html-rtl');
        });
    </script>
</body>
</html>

